<Window x:Class="SunfuWM.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:SunfuWM"
        mc:Ignorable="d"
        Title="SunfuWM" Height="20" Top="0" Left="0"
        WindowStyle="None" ResizeMode="NoResize" Topmost="True"
        Background="#333333" ShowInTaskbar="False">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>

        <!-- Workspace Strip -->
        <ItemsControl Name="WorkspaceControl" Grid.Column="0" Margin="5,0">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Horizontal"/>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <Button Content="{Binding Name}" 
                            Click="OnWorkspaceClick"
                            Tag="{Binding}"
                            Margin="2" Padding="8,0" 
                            Background="{Binding Background}" 
                            Foreground="White" BorderThickness="0"/>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>

        <!-- Layout Toggle -->
        <StackPanel Orientation="Horizontal" Grid.Column="1" Margin="5,0">
            <Button Name="LayoutToggleButton" Content="Tall" Click="OnToggleLayout" 
                    Margin="2" Padding="10,0" Background="#555" Foreground="White" BorderThickness="0" MinWidth="60"/>
        </StackPanel>

        <!-- Window List -->
        <ItemsControl Name="WindowListControl" Grid.Column="2">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Horizontal"/>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <Border Name="TabBorder" Background="#444444" CornerRadius="4" Margin="4,2" Padding="8,2" ToolTip="{Binding Title}">
                        <TextBlock Text="{Binding ProcessName}" 
                                   Foreground="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=Tag}" 
                                   FontSize="12" MaxWidth="100" TextTrimming="CharacterEllipsis"/>
                    </Border>
                    <DataTemplate.Triggers>
                        <DataTrigger Binding="{Binding IsFocused}" Value="True">
                            <Setter TargetName="TabBorder" Property="Background" Value="#666666"/>
                        </DataTrigger>
                    </DataTemplate.Triggers>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>

        <!-- Refresh/Reload -->
        <Button Content="Reload" Grid.Column="3" Click="OnRefreshState" 
                Margin="10,2,5,2" Padding="10,0" Background="#444" Foreground="#AAA" BorderThickness="0"/>
    </Grid>
</Window>
